(()=>{"use strict";const e="tasks.lists",t="tasks.selectedListID";let n=localStorage.getItem(t),o=JSON.parse(localStorage.getItem(e))||[];const a=document.querySelector("[data-tasks]"),l=document.querySelector("[data-lists]"),c=document.querySelector("[data-new-list-form]"),r=document.querySelector("[data-new-list-input]"),i=document.querySelector("[data-delete-button]"),d=document.querySelector("[data-display-container]"),s=document.querySelector("[data-list-title]"),u=document.querySelector("[data-clear-complete-tasks-button]"),m=document.querySelector("[data-new-task-form]"),p=document.querySelector("[data-new-task-input]"),f=document.getElementById("task-template");function y(){localStorage.setItem(e,JSON.stringify(o)),localStorage.setItem(t,n)}function g(){y(),S()}function S(){k(l),o.forEach((e=>{const t=document.createElement("li");t.dataset.listId=e.id,t.className="list-name flex gap-5 ease-in-out duration-300  group rounded-lg p-3 bg-white hover:shadow-lg hover: ring-slate-900/5 hover:ring-1 hover:cursor-pointer",t.innerText=e.name,e.id===n&&(t.className="active-list font-semibold flex gap-5 p-3"),l.appendChild(t)}));const e=o.find((e=>e.id===n));null==n?d.style.display="none":(d.style.display="",s.innerHTML=e.name,k(a),function(e){e.tasks.forEach((e=>{const t=document.importNode(f.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const o=t.querySelector("label");o.htmlFor=e.id,o.append(e.name),a.appendChild(t)}))}(e))}function k(e){for(;e.firstChild;)e.removeChild(e.firstChild)}a.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(o.find((e=>e.id===n)).tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,y())})),l.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(n=e.target.dataset.listId,g())})),m.addEventListener("submit",(e=>{e.preventDefault();const t=p.value;if(null==t||""===t)return;const a=(l=t,{id:Date.now().toString(),name:l,complete:!1});var l;p.value=null,o.find((e=>e.id===n)).tasks.push(a),g()})),c.addEventListener("submit",(e=>{e.preventDefault();const t=r.value;if(null==t||""===t)return;const n=(a=t,{id:Date.now().toString(),name:a,tasks:[]});var a;r.value=null,o.push(n),g()})),u.addEventListener("click",(()=>{const e=o.find((e=>e.id===n));e.tasks=e.tasks.filter((e=>!e.complete)),g()})),i.addEventListener("click",(()=>{o=o.filter((e=>e.id!==n)),n=null,g()})),function(){const e=document.querySelector(".newProjectBtn"),t=document.querySelector(".projBtnCancel"),n=document.querySelector(".projBtnSubmit");function o(){document.getElementById("popupProject").style.display="none"}e.addEventListener("click",(function(){document.getElementById("popupProject").style.display="block"})),t.addEventListener("click",o),n.addEventListener("click",o)}(),S()})();